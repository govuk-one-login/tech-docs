---
title: Receiver Endpoint
weight: 4
last_reviewed_on: 2025-02-19
review_in: 6 months
hide_in_navigation: false
layout: shared_signals_outbound
---

# Receiver Endpoint

The receiver endpoint is where the GOV.UK One Login Signal Exchange Transmitter will send signals related to user activity and should be built as per [RFC 8935](https://www.rfc-editor.org/rfc/rfc8935.html) . 

After obtaining an `ACCESS_TOKEN` from the [OAuth Token Endpoint][ssfOut.oauth2], the transmitter will make the following request when attempting to send the signal:

```bash
curl --request POST \
  --url https://your.service.gov.uk/receiver \
  --header 'Accept: application/json' \
  --header 'Authorization: Bearer ACCESS_TOKEN' \
  --header 'Content-Type: application/secevent+jwt' \
  --data SIGNAL
```

`SIGNAL` is a [Security Event Token][external.security-event-token] (SET) which builds upon the [JSON Web Token (JWT)][external.jwt-rfc] format and can be decoded as a regular JWT. You must return a `HTTP 202 (Accepted)` as any other responses will be treated as an error and will be attempted to be [delivered again][ssfOut.signal-delivery].

## Signature Verfication

As part of the SET, there is a signature that should be used to verify the authenticity of the payload:

1. Validate that the SET `kid` claim exists in the JWKS (JSON web key set) returned by the `/jwks` endpoint.
1. Check the JWT `alg` header matches the value for the key you are using. 
1. Use the key to validate the signature on the logout token according to the [JSON Web Signature Specification](https://datatracker.ietf.org/doc/html/rfc7515).
1. Check the value of `iss` (issuer) matches `https://ssf.account.gov.uk/`.
1. Check the `aud` (audience) claim is the same client ID you received when you [registered your service to use GOV.UK One Login Signal Exchange][ssfOut.before-you-integrate].
1. Check the `iat` (issued at) claim is in the past.


Below are the JWKS endpoints for our: 

- [Integration][external.ssfOut-jwks-endpoint-int] Environment.
- [Production][external.ssfOut-jwks-endpoint-prod] Environment.

As we may send SETs at a [high throughput][ssfOut.signal-delivery], you must implement caching of the JWKS endpoint. The cache must:

* Refresh regularly. 
* Refresh if the value in the `kid` claim does not exist in your cache.

## Payload validation

As the SET is a JWT, the body will the the signal itself. After the body has been decoded, we recommend validating the payload. The GOV.UK One Login Signal Exchange team can provide JSON schema's to help with payload validation. 

## Signal Delivery

A single user interaction with GOV.UK One Login may generate several signals therefore during the development of your receiver, you need to ensure that your solution can support a large volume of signals. 

The GOV.UK One Login Signal Exchange team will work with you to identify the expected delivery rate of signals based on a number of factors, as well as implement rate limiting to prevent your infrastructure from being overwhelmed with signals. These factors may include:

* Your expected throughput of users attempting to use your service.
* The signal(s) that you have subscribed to.
* If you are strictly an Auth only service or if you are an Identity Proofing and Verification Service.

We recommend that your receiver is **initially** setup to support minimum of 10 signals per second until a more accurate number can be determined based on the factors above.

<%= partial "partials/testing-warning" %>


### Transmitter Assumptions

You should also assume that the GOV.UK One Login Transmitter may deliver:

* Signals out of order.
* Duplicate signals.

GOV.UK One Login Transmitter will make a best effort attempt to ensure that signals are delivered in order and that there is no duplication.

### Transmitter Error Handling

If the transmitter receives any response other than `HTTP 202 (Accepted)`, then it is considered an error. The transmitter may attempt redelivery every 2 minutes up to 5 times. After the 5th attempt, the failed signals may be kept for up to 14 days before they are discarded. The GOV.UK One Login Signal Exchange will get in touch via the support process to arrange a replay.

Once you have set up your transmitter, you may test the integration by either:

* Setting up a [health check][ssfOut.health].
* Testing in the GOV.UK One Login [integration environment][ssfOut.integration-testing].

<%= partial "partials/links" %>